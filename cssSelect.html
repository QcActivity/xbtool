<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X浏览器元素选择器生成工具</title>
    <style>
        /* 工具样式：简洁适配手机 */
        body { font-family: sans-serif; padding: 15px; line-height: 1.6; }
        .tool-tip { 
            position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
            background: #333; color: #fff; padding: 8px 15px; 
            border-radius: 4px; font-size: 14px; z-index: 9999;
        }
        .selector-result { 
            margin: 20px 0; padding: 10px; background: #f5f5f5; 
            border-radius: 4px; word-break: break-all; font-size: 14px;
        }
        .test-elements { margin-top: 30px; padding: 15px; border-top: 1px dashed #ddd; }
        .test-btn { margin: 5px; padding: 8px 12px; cursor: pointer; }
    </style>
</head>
<body>
    <h3>X浏览器元素选择器生成器</h3>
    <p>点击下方任意测试元素，将自动生成其唯一CSS选择器：</p>

    <!-- 选择器结果显示区 -->
    <div>
        <span>当前元素选择器：</span>
        <div class="selector-result" id="selectorResult">点击元素后显示...</div>
    </div>

    <!-- 测试元素区：模拟各种常见元素（可替换为你需要的元素） -->
    <div class="test-elements">
        <p class="intro-text" id="mainIntro">这是测试文本段落</p>
        <button class="test-btn" id="submitBtn" data-type="submit">提交按钮</button>
        <button class="test-btn cancel-btn" title="取消操作">取消按钮</button>
        <img src="https://picsum.photos/150/80" alt="测试图片" class="test-img">
        <input type="text" placeholder="输入框" class="test-input" name="username">
    </div>

    <!-- 核心脚本：点击元素生成选择器 -->
    <script>
        // 1. 生成元素的唯一CSS选择器
        function getUniqueSelector(element) {
            // 若元素有ID，直接用ID选择器（最高优先级）
            if (element.id) {
                return `#${element.id}`;
            }

            // 若无ID，用“标签+类名”组合（优先唯一类名）
            let selector = element.tagName.toLowerCase();
            if (element.classList.length > 0) {
                // 筛选出能唯一标识该元素的类名
                const uniqueClass = Array.from(element.classList).find(cls => {
                    const sameClassElements = document.querySelectorAll(`.${cls}`);
                    return sameClassElements.length === 1;
                });
                if (uniqueClass) {
                    selector += `.${uniqueClass}`;
                    return selector;
                }
                // 若无唯一类名，拼接所有类名
                selector += '.' + Array.from(element.classList).join('.');
            }

            // 若仍不唯一，添加父元素标识（确保选择器唯一）
            if (document.querySelectorAll(selector).length > 1) {
                const parentSelector = getUniqueSelector(element.parentElement);
                selector = `${parentSelector} > ${selector}`;
            }

            return selector;
        }

        // 2. 监听页面所有元素的点击事件
        document.addEventListener('click', function(e) {
            // 排除点击结果显示区（避免误触发）
            if (e.target.id === 'selectorResult') return;

            // 生成并显示选择器
            const selector = getUniqueSelector(e.target);
            document.getElementById('selectorResult').textContent = selector;

            // 临时提示（增强手机端体验）
            const tip = document.createElement('div');
            tip.className = 'tool-tip';
            tip.textContent = '选择器已生成！';
            document.body.appendChild(tip);
            setTimeout(() => tip.remove(), 1500);

            // 阻止事件冒泡（避免选中父元素）
            e.stopPropagation();
        });
    </script>
</body>
</html>